<!--
 Copyright (C) 2014 Daiki Nogami.
 All rights reserved.
-->

<!DOCTYPE html>
<html ng-app="consoleApp">
<head lang="en">
    <meta charset="UTF-8">
    <title>Control Console</title>

    <!-- CSS -->
    <link href="css/bootstrap.min.css" rel="stylesheet">
    <link href="css/console.css" rel="stylesheet">

    <!-- JS -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
    <script src="js/angular-1.3.6.js"></script>
    <script src="js/bootstrap.min.js"></script>
    <script src="js/mainController.js"></script>
    <script src="js/fileSelector.js"></script>
</head>
<body ng-controller="mainCtrl">

    <nav class="navbar navbar-inverse navbar-fixed-top" role="navigation">
        <div class="container">
            <div class="navbar-header">
                <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
                    <span class="sr-only">Toggle navigation</span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </button>
                <a class="navbar-brand">Console</a>
            </div>
        </div>
    </nav>


    <div class="container top-container">
        <div class="page-header">
            <h2>Upload Voice File</h2>
        </div>
        <file-selector></file-selector>
    </div>


    <div class="container">
        <div class="page-header">
            <h2>Uploaded Files</h2>
        </div>
        <button type="button" class="btn btn-primary margin-button" ng-click="updateVoiceList()">Update</button>
        <table class="table table-striped">
            <thead>
                <tr>
                    <th>URL</th>
                    <th>Name</th>
                    <th>Key</th>
                    <th>Date</th>
                    <th></th>
                    <th></th>
                </tr>
            </thead>
            <tbody>
                <tr ng-repeat="item in items">
                    <td><a ng-href="{{item.url}}" target="_blank">{{item.url}}</a></td>
                    <td>{{item.name}}</td>
                    <td>{{item.key}}</td>
                    <td>{{item.created}}</td>
                    <td><button class="btn btn-info" ng-click="fireVoice(item)">Push</button></td>
                    <td><button class="btn btn-danger" ng-click="tryDeleteVoice(item)">Delete</button></td>
                </tr>
            </tbody>
        </table>
    </div>

    <div class="container">
        <div class="page-header">
            <h2>Registration GCM IDs</h2>
        </div>
        <button type="button" class="btn btn-primary margin-button" ng-click="updateIdList()">Update</button>
        <table class="table table-striped">
            <thead>
            <tr>
                <th>ID</th>
                <th>Date</th>
                <th>From</th>
                <th></th>
                <th></th>
            </tr>
            </thead>
            <tbody>
            <tr ng-repeat="rid in rids">
                <td>{{rid.registrationId}}</td>
                <td>{{rid.created}}</td>
                <td>
                    <select ng-model="rid.from" class="form-control" style="width: 110px;">
                        <option value="りかちゃん">りかちゃん</option>
                        <option value="彩花">彩花</option>
                        <option value="ぁぃぁぃ">ぁぃぁぃ</option>
                        <option value="美玲">美玲</option>
                        <option value="りななん">りななん</option>
                        <option value="ひなた">ひなた</option>
                        <option value="ぽーちゃん">ぽーちゃん</option>
                        <option value="りったん">りったん</option>
                        <option value="debug">debug</option>
                    </select>
                </td>
                <td><button class="btn btn-info" ng-click="fireTonTon(rid)">TonTon</button></td>
                <td><button class="btn btn-danger" ng-click="tryDeleteId(rid)">Delete</button></td>
            </tr>
            </tbody>
        </table>
    </div>

    <div class="container">
        <div class="page-header">
            <h2>Register GCM ID</h2>
        </div>
        <div class="input-group" style="display: flex;">
            <div class="input-group">
                <input type="text" class="form-control" id="registerId" ng-model="registrationId">
                <span class="input-group-btn">
                    <button id="selectFile" class="btn btn-primary" type="button" ng-click="uploadRegistrationId()">Register</button>
                </span>
            </div>
        </div>
    </div>

    <div class="container">
        <div class="page-header">
            <h2>Log</h2>
        </div>
        <table class="table table-striped">
            <thead>
            <tr>
                <th>Log</th>
                <th></th>
            </tr>
            </thead>
            <tbody>
            <tr>
                <td><a target="_blank" href="/accessLog.txt">Access Log</a></td>
                <td align="right"><button class="btn btn-danger" ng-click="clearLog('access')">Clear</button></td>
            </tr>
            <tr>
                <td><a target="_blank" href="/internalLog.txt">Internal Log</a></td>
                <td align="right"><button class="btn btn-danger" ng-click="clearLog('internal')">Clear</button></td>
            </tr>
            </tbody>
        </table>
    </div>

    <footer class="footer console-footer">
        <div class="container">
            <p class="text-muted">Copyright &copy; 2014 Daiki Nogami All Rights Reserved.</p>
        </div>
    </footer>

</body>
</html>